{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nvar _jsxFileName = \"/home/buck/Documents/software/formulate_graphql/src/input.component.tsx\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _inputHandler = /*#__PURE__*/_classPrivateFieldLooseKey(\"inputHandler\");\nexport default class Input extends React.Component {\n  static findMatchingNames(search) {\n    if (Array.isArray(this.props.completions)) {\n      return Object.keys(this.props.completions).filter(key => key.startsWith(search)).map(key => this.props.completions[key].name).sort();\n    }\n    return [];\n  }\n  static debounce(fn, delay) {\n    let self = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n    var timer;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timer);\n      timer = setTimeout(() => fn.apply(self, args), delay);\n    };\n  }\n\n  // state:object;\n\n  constructor() {\n    super();\n    Object.defineProperty(this, _inputHandler, {\n      value: _inputHandler2\n    });\n    this.matches = [];\n    this.state = {\n      matchCount: -1\n    };\n    this.props.completions.then(list => {\n      this.props.completions = list;\n      console.log(list);\n    });\n    if (process.env.NODE_ENV == 'development') {\n      var _this$props;\n      console.debug(this);\n      if (typeof ((_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.onResults) != 'function') console.warn(\"No onResults() handler specified on <Input> in parent\");\n    }\n  }\n  get inputHandler() {\n    var _this$props2, _this$props3;\n    if (Number((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : _this$props2.debounce)) return Input.debounce(_classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler], (_this$props3 = this.props) === null || _this$props3 === void 0 ? void 0 : _this$props3.debounce, this);else return _classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler].bind(this);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"{this.props.id\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search...\",\n        onInput: this.inputHandler,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 4\n      }, this), this.state.matchCount > -1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Matches: \", this.state.matchCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 32\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 3\n    }, this);\n  }\n}\nfunction _inputHandler2(event) {\n  if (event.target.value) {\n    this.matches = Input.findMatchingNames(event.target.value);\n    console.log(event.target.value, '=', arr);\n    this.setState({\n      matchCount: this.matches.length\n    });\n    if (this.state.matchCount) {\n      var _this$props4;\n      if (typeof ((_this$props4 = this.props) === null || _this$props4 === void 0 ? void 0 : _this$props4.onResults) == 'function') {\n        this.props.onResults(this.matches);\n      } else {\n        promise.then(console.log, console.error);\n      }\n    }\n  }\n}","map":{"version":3,"names":["React","Input","Component","findMatchingNames","search","Array","isArray","props","completions","Object","keys","filter","key","startsWith","map","name","sort","debounce","fn","delay","self","window","timer","args","clearTimeout","setTimeout","apply","constructor","matches","state","matchCount","then","list","console","log","process","env","NODE_ENV","debug","onResults","warn","inputHandler","Number","bind","render","event","target","value","arr","setState","length","promise","error"],"sources":["/home/buck/Documents/software/formulate_graphql/src/input.component.tsx"],"sourcesContent":["import React from 'react'\n\nexport default class Input extends React.Component {\n\n\tstatic findMatchingNames(search){\n\t\tif(Array.isArray(this.props.completions)){\n\t\t\treturn Object.keys(this.props.completions)\n\t\t\t\t.filter(key=>key.startsWith(search))\n\t\t\t\t.map(key=>this.props.completions[key].name)\n\t\t\t\t.sort()\n\t\t}\n\t\treturn [];\n\t}\n\n\n\tstatic debounce(fn,delay,self=window){\n\t\tvar timer;\n\t\treturn (...args)=>{\n\t\t\tclearTimeout(timer);\n\t\t\ttimer=setTimeout(()=>fn.apply(self,args),delay);\n\t\t}\n\t}\n\n\t// state:object;\n\n\tconstructor(){\n\t\tsuper()\n\t\tthis.state={matchCount:-1}\n\t\tthis.props.completions.then(list=>{this.props.completions=list; console.log(list)})\n\t\tif(process.env.NODE_ENV=='development'){\n\t\t\tconsole.debug(this)\n\t\t\tif(typeof this.props?.onResults!='function')\n\t\t\t\tconsole.warn(\"No onResults() handler specified on <Input> in parent\");\n\t\t}\n\n\t}\n\n\t\n\tget inputHandler(){\n\t\tif(Number(this.props?.debounce))\n\t\t\treturn Input.debounce(this.#inputHandler,this.props?.debounce,this);\n\t\telse\n\t\t\treturn this.#inputHandler.bind(this);\n\t}\n\n\tmatches=[];\n\t#inputHandler(event){\n\t\tif(event.target.value){\n\t\t\tthis.matches=Input.findMatchingNames(event.target.value);\n\t\t\tconsole.log(event.target.value,'=',arr);\n\t\t\tthis.setState({matchCount:this.matches.length})\n\t\t\tif(this.state.matchCount){\n\t\t\t\tif(typeof this.props?.onResults=='function'){\n\t\t\t\t\tthis.props.onResults(this.matches);\n\t\t\t\t}else{\n\t\t\t\t\tpromise.then(console.log,console.error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n   \n\n\n\trender(){return (\n\t\t<div id=\"{this.props.id\">\n\t\t\t<input type=\"text\" placeholder=\"Search...\" onInput={this.inputHandler} autoFocus></input>\n\t\t\t{this.state.matchCount>-1 ? <span>Matches: {this.state.matchCount}</span> : null }\n\t\t</div>\n\t);}\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}