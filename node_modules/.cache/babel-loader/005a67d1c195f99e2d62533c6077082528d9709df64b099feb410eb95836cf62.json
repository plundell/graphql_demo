{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nvar _jsxFileName = \"/home/buck/Documents/software/formulate_graphql/src/components/input.component.tsx\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _inputHandler = /*#__PURE__*/_classPrivateFieldLooseKey(\"inputHandler\");\nexport class Input extends React.Component {\n  constructor() {\n    super(...arguments);\n    Object.defineProperty(this, _inputHandler, {\n      value: _inputHandler2\n    });\n    this.lastSearch = '';\n    this.completions = null;\n    this.matches = [];\n  }\n  get inputHandler() {\n    var _this$props;\n    if ((_this$props = this.props) !== null && _this$props !== void 0 && _this$props.debounce && this.props.debounce > 0) return Input.debounce(_classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler], this.props.debounce, this);else return _classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler].bind(this);\n  }\n  static debounce(fn, delay) {\n    let self = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n    var timer;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timer);\n      timer = Number(setTimeout(() => fn.apply(self, args), delay));\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: this.props.id,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search...\",\n        onInput: this.inputHandler,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 4\n      }, this), this.state.matchCount > -1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Matches: \", this.state.matchCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 32\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }, this);\n  }\n}\nfunction _inputHandler2(event) {\n  const search = event.target.value;\n  const lastSearch = this.lastSearch;\n  this.lastSearch = search;\n  if (!search) {\n    this.completions = null;\n  } else if (this.props.getCompletions) {\n    var lastCompletions;\n    if (lastSearch.startsWith(search)) {\n      lastCompletions = this.completions || undefined;\n    } else {\n      this.completions = null; //we've been erasing, delete the old completions\n    }\n\n    this.completions = this.props.getCompletions(search, lastCompletions);\n  }\n}\nexport default Input;","map":{"version":3,"names":["React","Input","Component","lastSearch","completions","matches","inputHandler","props","debounce","bind","fn","delay","self","window","timer","args","clearTimeout","Number","setTimeout","apply","render","id","state","matchCount","event","search","target","value","getCompletions","lastCompletions","startsWith","undefined"],"sources":["/home/buck/Documents/software/formulate_graphql/src/components/input.component.tsx"],"sourcesContent":["import React from 'react'\n\ntype CompletionList=Array<{name:string}>\n\nexport declare interface getCompletionSignature {\n\t(search:string,lastResult?:CompletionList):CompletionList|null\n}\nexport declare interface InputPropsInterface {\n\tid?:string,\n\tdebounce?:number,\n\tgetCompletions?:getCompletionSignature\n}\n\n\nexport class Input extends React.Component<InputPropsInterface> {\n\n\n\tpublic lastSearch:Parameters<getCompletionSignature>[0]='';\n\tpublic completions:CompletionList|null=null;\n\n\t\n\tget inputHandler(){\n\t\tif(this.props?.debounce && this.props.debounce>0)\n\t\t\treturn Input.debounce(this.#inputHandler,this.props.debounce,this);\n\t\telse\n\t\t\treturn this.#inputHandler.bind(this);\n\t}\n\n\tmatches=[];\n\t#inputHandler(event:React.ChangeEvent<HTMLInputElement>){\n\t\tconst search=event.target.value;\n\t\tconst lastSearch=this.lastSearch;\n\t\tthis.lastSearch=search;\n\t\tif(!search){\n\t\t\tthis.completions=null;\n\t\t}else if(this.props.getCompletions){\n\t\t\tvar lastCompletions;\n\t\t\tif(lastSearch.startsWith(search)){\n\t\t\t\tlastCompletions=this.completions||undefined;\n\t\t\t}else{\n\t\t\t\tthis.completions=null; //we've been erasing, delete the old completions\n\t\t\t}\n\t\t \tthis.completions=this.props.getCompletions(search,lastCompletions);\n\t\t}\n\t}\n\n\n\tstatic debounce(fn:Function,delay:number,self:any=window){\n\t\tvar timer:number;\n\t\treturn (...args:any)=>{\n\t\t\tclearTimeout(timer);\n\t\t\ttimer=Number(setTimeout(()=>fn.apply(self,args),delay));\n\t\t}\n\t}\n   \n\trender(){return (\n\t\t<div id={this.props.id}>\n\t\t\t<input type=\"text\" placeholder=\"Search...\" onInput={this.inputHandler} autoFocus></input>\n\t\t\t{this.state.matchCount>-1 ? <span>Matches: {this.state.matchCount}</span> : null }\n\t\t</div>\n\t);}\n\n\n}\n\n\nexport default Input;\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAAA;AAAA;AAczB,OAAO,MAAMC,KAAK,SAASD,KAAK,CAACE,SAAS,CAAsB;EAAA;IAAA;IAAA;MAAA;IAAA;IAAA,KAGxDC,UAAU,GAAuC,EAAE;IAAA,KACnDC,WAAW,GAAqB,IAAI;IAAA,KAU3CC,OAAO,GAAC,EAAE;EAAA;EAPV,IAAIC,YAAY,GAAE;IAAA;IACjB,IAAG,mBAAI,CAACC,KAAK,wCAAV,YAAYC,QAAQ,IAAI,IAAI,CAACD,KAAK,CAACC,QAAQ,GAAC,CAAC,EAC/C,OAAOP,KAAK,CAACO,QAAQ,6BAAC,IAAI,iCAAe,IAAI,CAACD,KAAK,CAACC,QAAQ,EAAC,IAAI,CAAC,CAAC,KAEnE,OAAO,gCAAI,gCAAeC,IAAI,CAAC,IAAI,CAAC;EACtC;EAqBA,OAAOD,QAAQ,CAACE,EAAW,EAACC,KAAY,EAAiB;IAAA,IAAhBC,IAAQ,uEAACC,MAAM;IACvD,IAAIC,KAAY;IAChB,OAAO,YAAe;MAAA,kCAAXC,IAAI;QAAJA,IAAI;MAAA;MACdC,YAAY,CAACF,KAAK,CAAC;MACnBA,KAAK,GAACG,MAAM,CAACC,UAAU,CAAC,MAAIR,EAAE,CAACS,KAAK,CAACP,IAAI,EAACG,IAAI,CAAC,EAACJ,KAAK,CAAC,CAAC;IACxD,CAAC;EACF;EAEAS,MAAM,GAAE;IAAC,oBACR;MAAK,EAAE,EAAE,IAAI,CAACb,KAAK,CAACc,EAAG;MAAA,wBACtB;QAAO,IAAI,EAAC,MAAM;QAAC,WAAW,EAAC,WAAW;QAAC,OAAO,EAAE,IAAI,CAACf,YAAa;QAAC,SAAS;MAAA;QAAA;QAAA;QAAA;MAAA,QAAS,EACxF,IAAI,CAACgB,KAAK,CAACC,UAAU,GAAC,CAAC,CAAC,gBAAG;QAAA,wBAAgB,IAAI,CAACD,KAAK,CAACC,UAAU;MAAA;QAAA;QAAA;QAAA;MAAA,QAAQ,GAAG,IAAI;IAAA;MAAA;MAAA;MAAA;IAAA,QAC3E;EACL;AAGH;AAAC,wBAlCcC,KAAyC,EAAC;EACvD,MAAMC,MAAM,GAACD,KAAK,CAACE,MAAM,CAACC,KAAK;EAC/B,MAAMxB,UAAU,GAAC,IAAI,CAACA,UAAU;EAChC,IAAI,CAACA,UAAU,GAACsB,MAAM;EACtB,IAAG,CAACA,MAAM,EAAC;IACV,IAAI,CAACrB,WAAW,GAAC,IAAI;EACtB,CAAC,MAAK,IAAG,IAAI,CAACG,KAAK,CAACqB,cAAc,EAAC;IAClC,IAAIC,eAAe;IACnB,IAAG1B,UAAU,CAAC2B,UAAU,CAACL,MAAM,CAAC,EAAC;MAChCI,eAAe,GAAC,IAAI,CAACzB,WAAW,IAAE2B,SAAS;IAC5C,CAAC,MAAI;MACJ,IAAI,CAAC3B,WAAW,GAAC,IAAI,CAAC,CAAC;IACxB;;IACC,IAAI,CAACA,WAAW,GAAC,IAAI,CAACG,KAAK,CAACqB,cAAc,CAACH,MAAM,EAACI,eAAe,CAAC;EACpE;AACD;AAsBD,eAAe5B,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}