{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nvar _jsxFileName = \"/home/buck/Documents/software/formulate_graphql/src/components/country-input.d/country-input.component.tsx\";\nimport React from 'react';\nimport { Input } from 'components/input.component';\nimport { getNamesAndCodes } from './names-and-codes.query';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst settings = {\n  debounce: 500,\n  inputId: \"search\"\n};\nvar _setJSXOnMatch = /*#__PURE__*/_classPrivateFieldLooseKey(\"setJSXOnMatch\");\nexport default class CountryInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.entities = null;\n    Object.defineProperty(this, _setJSXOnMatch, {\n      writable: true,\n      value: (ent, prop, regex) => {\n        let match = ent[prop].match(regex);\n        if (match) {\n          let htmlArr = [];\n          match[1] && htmlArr.push( /*#__PURE__*/_jsxDEV(\"span\", {\n            children: match[1]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 30\n          }, this));\n          htmlArr.push( /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"highlight\",\n            children: match[2]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 18\n          }, this));\n          match[3] && htmlArr.push( /*#__PURE__*/_jsxDEV(\"span\", {\n            children: match[3]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 30\n          }, this));\n          htmlArr.push( /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"completionType\",\n            children: ent.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 18\n          }, this));\n          ent.html = htmlArr;\n          return true;\n        }\n        return false;\n      }\n    });\n    getNamesAndCodes().then(ent => {\n      if (ent.length) {\n        this.entities = ent;\n      }\n    });\n  }\n  getCompletions(search, entities) {\n    if (!entities || !entities.length) entities = this.entities; //if no subset of entities are passed in then use the entire list\n\n    if (!entities || !entities.length) return null;\n    const regex = new RegExp((search.length < 3 ? '(^)(' : '(.*)(') + search + ')(.*)', 'i'); //short strings we only match begining\n    if (search.length < 3) entities = entities.filter(ent => _classPrivateFieldLooseBase(this, _setJSXOnMatch)[_setJSXOnMatch](ent, 'search', regex) || _classPrivateFieldLooseBase(this, _setJSXOnMatch)[_setJSXOnMatch](ent, 'code', regex));else entities = entities.filter(ent => _classPrivateFieldLooseBase(this, _setJSXOnMatch)[_setJSXOnMatch](ent, 'search', regex));\n    return entities.length ? entities : null;\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(Input, {\n      id: settings.inputId,\n      debounce: settings.debounce,\n      getCompletions: this.getCompletions.bind(this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Input","getNamesAndCodes","settings","debounce","inputId","CountryInput","Component","constructor","props","entities","ent","prop","regex","match","htmlArr","push","type","html","then","length","getCompletions","search","RegExp","filter","render","bind"],"sources":["/home/buck/Documents/software/formulate_graphql/src/components/country-input.d/country-input.component.tsx"],"sourcesContent":["import React from 'react'\nimport {Input} from 'components/input.component'\nimport {getNamesAndCodes,Entity} from './names-and-codes.query'\n\ntype NullableEntityArray=Entity[]|null;\n\nconst settings={\n\tdebounce:500\n\t,inputId:\"search\"\n}\n\nexport default class CountryInput extends React.Component {\n\n\tprivate entities:NullableEntityArray=null;\n\n\tconstructor(props:never){\n\t\tsuper(props)\n\t\tgetNamesAndCodes().then(ent=>{if(ent.length){this.entities=ent}});\n\t}\n\n\tgetCompletions(search:string,entities:NullableEntityArray):NullableEntityArray {\n\t\tif(!entities || !entities.length)\n\t\t\tentities=this.entities; //if no subset of entities are passed in then use the entire list\n\t\t\n\t\tif(!entities || !entities.length)\n\t\t\treturn null;\n\n\t\tconst regex=new RegExp((search.length<3 ? '(^)(' : '(.*)(')+search+')(.*)','i'); //short strings we only match begining\n\t\tif(search.length<3)\n\t\t\tentities=entities.filter(ent=>this.#setJSXOnMatch(ent,'search',regex)||this.#setJSXOnMatch(ent,'code',regex));\n\t\telse\n\t\t\tentities=entities.filter(ent=>this.#setJSXOnMatch(ent,'search',regex));\n\t\t\n\t\treturn (entities.length ? entities : null);\n\t}\n\n\t#setJSXOnMatch=(ent:Entity,prop:\"search\"|\"code\",regex:RegExp):boolean=>{\n\t\tlet match=ent[prop].match(regex);\n\t\tif(match){\n\t\t\tlet htmlArr:JSX.Element[]=[];\n\t\t\tmatch[1] && htmlArr.push((<span>{match[1]}</span>))\n\t\t\thtmlArr.push((<span className=\"highlight\">{match[2]}</span>))\n\t\t\tmatch[3] && htmlArr.push((<span>{match[3]}</span>))\n\t\t\thtmlArr.push((<span className=\"completionType\">{ent.type}</span>))\n\t\t\tent.html=htmlArr\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\n\trender(){\n\t\treturn (\n\t\t\t<Input id={settings.inputId} debounce={settings.debounce} getCompletions={this.getCompletions.bind(this)} />\n\t\t)\n\t}\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}