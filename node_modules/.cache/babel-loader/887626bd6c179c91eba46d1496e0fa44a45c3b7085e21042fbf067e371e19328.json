{"ast":null,"code":"import { graphql, assertEntityType, NamesAndCodesDocument } from 'services/countries-api/countries-api.service';\nfunction makeEntityArray(data) {\n  const list = [];\n  Object.entries(data).forEach(_ref => {\n    let [t, arr] = _ref;\n    if (Array.isArray(arr)) {\n      console.log(arr[0].__typename);\n      const type = assertEntityType(t);\n      arr.forEach(_ref2 => {\n        let {\n          code,\n          name\n        } = _ref2;\n        name = String(name || code);\n        list.push({\n          name,\n          code,\n          type,\n          search: name.toLowerCase().replaceAll(/[^a-z]/, ''),\n          key: `{code}-{type}`\n        });\n      });\n    }\n  });\n  return list;\n}\nexport async function getNamesAndCodes() {\n  return graphql.request(NamesAndCodesDocument).then(makeEntityArray);\n}\nexport default getNamesAndCodes;","map":{"version":3,"names":["graphql","assertEntityType","NamesAndCodesDocument","makeEntityArray","data","list","Object","entries","forEach","t","arr","Array","isArray","console","log","__typename","type","code","name","String","push","search","toLowerCase","replaceAll","key","getNamesAndCodes","request","then"],"sources":["/home/buck/Documents/software/formulate_graphql/src/components/country-input.d/names-and-codes.query.ts"],"sourcesContent":["import {\n\tgraphql,\n\tEntityType,\n\tassertEntityType,\n\tScalars,\n\tNamesAndCodesQuery,\n\tNamesAndCodesQueryVariables,\n\tNamesAndCodesDocument\n} from 'services/countries-api/countries-api.service';\n\n\nexport interface Entity{\n\t\tname:Scalars['String']\n\t\t,search:Lowercase<Scalars['String']>\n\t\t,code:Scalars['ID']\n\t\t,type:EntityType\n\t\t,key:Scalars['String']\n}\n\n\nfunction makeEntityArray(data:NamesAndCodesQuery):Array<Entity> {\n\tconst list:ReturnType<typeof makeEntityArray>=[];\n\tObject.entries(data).forEach(([t,arr])=>{\n\t\tif(Array.isArray(arr)){\n\t\t\tconsole.log(arr[0].__typename)\n\t\t\tconst type=assertEntityType(t)\n\t\t\tarr.forEach(({code,name})=>{\n\n\t\t\t\tname=String(name||code);\n\t\t\t\tlist.push({\n\t\t\t\t\tname, \n\t\t\t\t\tcode, \n\t\t\t\t\ttype,\n\t\t\t\t\tsearch:name.toLowerCase().replaceAll(/[^a-z]/,'') as Entity[\"search\"],\n\t\t\t\t\tkey:`{code}-{type}`\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t})\n\treturn list\n}\n\nexport async function getNamesAndCodes(){\n\treturn graphql.request<NamesAndCodesQuery,NamesAndCodesQueryVariables>(NamesAndCodesDocument).then(makeEntityArray)\n}\n\nexport default getNamesAndCodes\n\n\n\n"],"mappings":"AAAA,SACCA,OAAO,EAEPC,gBAAgB,EAIhBC,qBAAqB,QACf,8CAA8C;AAYrD,SAASC,eAAe,CAACC,IAAuB,EAAgB;EAC/D,MAAMC,IAAuC,GAAC,EAAE;EAChDC,MAAM,CAACC,OAAO,CAACH,IAAI,CAAC,CAACI,OAAO,CAAC,QAAW;IAAA,IAAV,CAACC,CAAC,EAACC,GAAG,CAAC;IACpC,IAAGC,KAAK,CAACC,OAAO,CAACF,GAAG,CAAC,EAAC;MACrBG,OAAO,CAACC,GAAG,CAACJ,GAAG,CAAC,CAAC,CAAC,CAACK,UAAU,CAAC;MAC9B,MAAMC,IAAI,GAACf,gBAAgB,CAACQ,CAAC,CAAC;MAC9BC,GAAG,CAACF,OAAO,CAAC,SAAe;QAAA,IAAd;UAACS,IAAI;UAACC;QAAI,CAAC;QAEvBA,IAAI,GAACC,MAAM,CAACD,IAAI,IAAED,IAAI,CAAC;QACvBZ,IAAI,CAACe,IAAI,CAAC;UACTF,IAAI;UACJD,IAAI;UACJD,IAAI;UACJK,MAAM,EAACH,IAAI,CAACI,WAAW,EAAE,CAACC,UAAU,CAAC,QAAQ,EAAC,EAAE,CAAqB;UACrEC,GAAG,EAAE;QACN,CAAC,CAAC;MACH,CAAC,CAAC;IACH;EACD,CAAC,CAAC;EACF,OAAOnB,IAAI;AACZ;AAEA,OAAO,eAAeoB,gBAAgB,GAAE;EACvC,OAAOzB,OAAO,CAAC0B,OAAO,CAAiDxB,qBAAqB,CAAC,CAACyB,IAAI,CAACxB,eAAe,CAAC;AACpH;AAEA,eAAesB,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}