{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nvar _jsxFileName = \"/home/buck/Documents/software/formulate_graphql/src/components/completion-input.d/completion-input.component.tsx\";\nimport React from 'react';\nimport \"./completion-input.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _inputHandler = /*#__PURE__*/_classPrivateFieldLooseKey(\"inputHandler\");\nvar _setCompletionState = /*#__PURE__*/_classPrivateFieldLooseKey(\"setCompletionState\");\nvar _keyboardHandler = /*#__PURE__*/_classPrivateFieldLooseKey(\"keyboardHandler\");\nvar _applySuggestion = /*#__PURE__*/_classPrivateFieldLooseKey(\"applySuggestion\");\nexport class CompletionInput extends React.Component {\n  //create a fake input element as a placeholder\n\n  constructor(props) {\n    super(props);\n    Object.defineProperty(this, _applySuggestion, {\n      value: _applySuggestion2\n    });\n    Object.defineProperty(this, _keyboardHandler, {\n      value: _keyboardHandler2\n    });\n    Object.defineProperty(this, _setCompletionState, {\n      value: _setCompletionState2\n    });\n    Object.defineProperty(this, _inputHandler, {\n      value: _inputHandler2\n    });\n    this.value = '';\n    this.inputElem = document.createElement('input');\n    this.state = {\n      completions: null,\n      highlight: -1\n    };\n  }\n  get inputHandler() {\n    var _this$props;\n    const fn = event => _classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler](event);\n    if ((_this$props = this.props) !== null && _this$props !== void 0 && _this$props.debounce && this.props.debounce > 0) return CompletionInput.debounceHandler(fn, this.props.debounce, null);\n    // return CompletionInput.debounceHandler(this.#inputHandler,this.props.debounce,this);\n    else\n      // return this.#inputHandler.bind(this);\n      return fn;\n  }\n  /* eslint-disable-next-line @typescript-eslint/ban-types -- we explicitly expect any function */\n  static debounceHandler(fn) {\n    let delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n    let self = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n    var timer; /* eslint-disable-line no-var -- explicitly refers to entire function */\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      // console.log('debounce',...args);\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        // console.log('trigger',...args);\n        try {\n          fn.apply(self, args);\n        } catch (e) {\n          console.error(e);\n        }\n      }, delay);\n    };\n  }\n  get keyboardHandler() {\n    return _classPrivateFieldLooseBase(this, _keyboardHandler)[_keyboardHandler].bind(this);\n  }\n  get currentSuggestion() {\n    if (this.state.completions && this.state.completions.length) {\n      return this.state.completions[Math.max(this.state.highlight, 0)];\n    }\n    return undefined;\n  }\n  render() {\n    var _this$state$completio;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: this.props.id,\n      className: \"completionInput\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: elem => this.inputElem = elem,\n        type: \"text\",\n        placeholder: \"Search...\",\n        onInput: this.inputHandler,\n        onKeyDown: this.keyboardHandler,\n        onBlur: () => {\n          this.forceUpdate();\n        },\n        onFocus: () => {\n          this.inputElem && this.forceUpdate();\n        },\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }, this), this.state.completions && (this.inputElem ? this.inputElem == document.activeElement : true) && (this.state.completions.length > 1 || this.value != ((_this$state$completio = this.state.completions[0]) === null || _this$state$completio === void 0 ? void 0 : _this$state$completio.value)) ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completionList\",\n        children: this.state.completions.map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          id: c.key || c.value,\n          className: `completion ${i == this.state.highlight ? 'active' : ''}`,\n          children: c.html || c.value\n        }, c.key || c.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 6\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 4\n    }, this);\n  }\n  componentDidMount() {\n    var _this$inputElem;\n    (_this$inputElem = this.inputElem) === null || _this$inputElem === void 0 ? void 0 : _this$inputElem.focus();\n  }\n}\nfunction _inputHandler2(event) {\n  // console.log(\"updating this.state.completions\",this)\t\n  const last = this.value;\n  const value = this.value = this.inputElem.value;\n  if (!value) {\n    _classPrivateFieldLooseBase(this, _setCompletionState)[_setCompletionState](null);\n    if (this.props.onEmpty) this.props.onEmpty();\n  } else if (this.props.onInput) {\n    if (event) event.preventDefault();\n    let lastCompletions = null;\n    if (value.startsWith(last)) {\n      lastCompletions = this.state.completions;\n    } else {\n      _classPrivateFieldLooseBase(this, _setCompletionState)[_setCompletionState](null); //user has pressed backspace => delete the old completions\n    }\n\n    _classPrivateFieldLooseBase(this, _setCompletionState)[_setCompletionState](this.props.onInput(value, lastCompletions));\n  }\n}\nfunction _setCompletionState2(completions) {\n  this.setState({\n    completions\n  });\n}\nfunction _keyboardHandler2(event) {\n  var _this$state$completio2, _this$inputElem2, _this$inputElem3;\n  if (!event.target.hasOwnProperty('value')) {\n    console.warn(\"Event target didn't have 'value' prop:\", event);\n    return;\n  }\n  const input = event.target;\n  // console.log(event,input);\n  var highlight; // eslint-disable-line no-var \n  switch (event.key) {\n    case 'ArrowUp':\n      highlight = this.state.highlight - 1;\n      if (highlight > -1) this.setState({\n        highlight\n      });\n      break;\n    case 'ArrowDown':\n      highlight = this.state.highlight + 1;\n      if (highlight <= (((_this$state$completio2 = this.state.completions) === null || _this$state$completio2 === void 0 ? void 0 : _this$state$completio2.length) || 0)) this.setState({\n        highlight\n      });\n      break;\n    case 'Tab':\n      _classPrivateFieldLooseBase(this, _applySuggestion)[_applySuggestion](input);\n      event.preventDefault();\n      (_this$inputElem2 = this.inputElem) === null || _this$inputElem2 === void 0 ? void 0 : _this$inputElem2.blur();\n      break;\n    case 'Enter':\n      _classPrivateFieldLooseBase(this, _applySuggestion)[_applySuggestion](input);\n      if (this.props.onSubmit && this.currentSuggestion) {\n        // console.log(\"input calling onSubmit handler\")\n        this.props.onSubmit(this.state.completions);\n      } else {\n        input.dispatchEvent(new Event(\"submit\")); //alternative method\n      }\n\n      (_this$inputElem3 = this.inputElem) === null || _this$inputElem3 === void 0 ? void 0 : _this$inputElem3.blur();\n      break;\n    default:\n      return;\n  }\n  // setTimeout(()=>console.log(event.key,this.state,this),100);\n}\nfunction _applySuggestion2(input) {\n  if (this.state.highlight > -1) {\n    const suggestion = this.currentSuggestion;\n    if (suggestion) {\n      //manually set the \n      input.value = suggestion.value;\n      _classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler]();\n    }\n  }\n}\nexport default CompletionInput;","map":{"version":3,"names":["React","CompletionInput","Component","constructor","props","value","inputElem","document","createElement","state","completions","highlight","inputHandler","fn","event","debounce","debounceHandler","delay","self","window","timer","args","clearTimeout","setTimeout","apply","e","console","error","keyboardHandler","bind","currentSuggestion","length","Math","max","undefined","render","id","elem","forceUpdate","activeElement","map","c","i","key","html","componentDidMount","focus","last","onEmpty","onInput","preventDefault","lastCompletions","startsWith","setState","target","hasOwnProperty","warn","input","blur","onSubmit","dispatchEvent","Event","suggestion"],"sources":["/home/buck/Documents/software/formulate_graphql/src/components/completion-input.d/completion-input.component.tsx"],"sourcesContent":["import React from 'react'\nimport \"./completion-input.css\"; \n\n\ntype CompletionItem={\n\tvalue:string\n\t,key?:string\n\t,html?:JSX.Element|JSX.Element[]\n}\n\n\n\nexport type OnInputHandler<T extends CompletionItem,R=T[]|null>=(search:string,lastCompletions:R)=>R\n\nexport type OnSubmitHandler<T extends CompletionItem>=(completions:T[]|null)=>void\n\nexport interface Props<T extends CompletionItem> {\n\tid?:string,\n\tdebounce?:number,\n\tonInput:OnInputHandler<T> ,\n\tonSubmit?:OnSubmitHandler<T>\n\tonEmpty?:()=>void\n}\n\ninterface State<T extends CompletionItem>{\n\tcompletions:T[]|null\n\t,highlight:number\n}\n\n\nexport class CompletionInput<T extends CompletionItem> extends React.Component<Props<T>,State<T>> {\n\n\n\tpublic value='';\n\n\t//create a fake input element as a placeholder\n\tpublic inputElem:HTMLInputElement=document.createElement('input');\n\n\tconstructor(props:Props<T>){\n\t\tsuper(props);\n\t\tthis.state={completions:null,highlight:-1};\n\t}\n\t\n\tget inputHandler(){\n\t\tconst fn=(event:React.FormEvent<HTMLInputElement>)=>this.#inputHandler(event)\n\t\tif(this.props?.debounce && this.props.debounce>0)\n\t\t\treturn CompletionInput.debounceHandler(fn,this.props.debounce,null);\n\t\t\t// return CompletionInput.debounceHandler(this.#inputHandler,this.props.debounce,this);\n\t\telse\n\t\t\t// return this.#inputHandler.bind(this);\n\t\t\treturn fn;\n\t}\n\t#inputHandler(event?:React.FormEvent<HTMLInputElement>){\n\t\t// console.log(\"updating this.state.completions\",this)\t\n\t\tconst last=this.value;\n\t\tconst value=this.value=this.inputElem.value;\n\t\tif(!value){\n\t\t\tthis.#setCompletionState(null);\n\t\t\tif(this.props.onEmpty)\n\t\t\t\tthis.props.onEmpty()\n\t\t}else if(this.props.onInput){\n\t\t\tif(event)\n\t\t\t\tevent.preventDefault();\n\t\t\tlet lastCompletions=null;\n\t\t\tif(value.startsWith(last)){\n\t\t\t\tlastCompletions=this.state.completions;\n\t\t\t}else{\n\t\t\t\tthis.#setCompletionState(null); //user has pressed backspace => delete the old completions\n\t\t\t}\n\t\t\tthis.#setCompletionState(this.props.onInput(value,lastCompletions));\n\t\t}\n\t}\n\n\t#setCompletionState(completions:State<T>[\"completions\"]){\n\t\tthis.setState({completions});\n\t}\n\n\t/* eslint-disable-next-line @typescript-eslint/ban-types -- we explicitly expect any function */\n\tstatic debounceHandler<F extends (...args:any[])=>any>(fn:F,delay=50,self:any=window) {\n\t\tvar timer:ReturnType<typeof setInterval>; /* eslint-disable-line no-var -- explicitly refers to entire function */\n\t\treturn (...args:Parameters<F>)=>{\n\t\t\t// console.log('debounce',...args);\n\t\t\tclearTimeout(timer);\n\t\t\ttimer=setTimeout(()=>{\n\t\t\t\t// console.log('trigger',...args);\n\t\t\t\ttry{fn.apply(self,args)}catch(e){console.error(e)}\n\t\t\t},delay);\n\t\t}\n\t}\n   \n\tget keyboardHandler(){\n\t\treturn this.#keyboardHandler.bind(this)\n\t}\n\t#keyboardHandler(event:React.KeyboardEvent<HTMLInputElement>){\n\t\tif(!event.target.hasOwnProperty('value')){\n\t\t\tconsole.warn(\"Event target didn't have 'value' prop:\",event)\n\t\t\treturn;\n\t\t}\n\t\tconst input=event.target as unknown as HTMLInputElement\n\t\t// console.log(event,input);\n\t\tvar highlight; // eslint-disable-line no-var \n\t\tswitch(event.key){\n\t\tcase 'ArrowUp':\n\t\t\thighlight=this.state.highlight-1;\n\t\t\tif(highlight>-1)\n\t\t\t\tthis.setState({highlight})\n\t\t\tbreak;\n\t\t\n\t\tcase 'ArrowDown':\n\t\t\thighlight=this.state.highlight+1;\n\t\t\tif(highlight<=(this.state.completions?.length||0))\n\t\t\t\tthis.setState({highlight})\n\t\t\tbreak;\n\t\tcase 'Tab':\n\t\t\tthis.#applySuggestion(input);\n\t\t\tevent.preventDefault();\n\t\t\tthis.inputElem?.blur();\n\t\t\tbreak;\n\t\tcase 'Enter':\n\t\t\tthis.#applySuggestion(input);\n\t\t\tif(this.props.onSubmit && this.currentSuggestion){\n\t\t\t\t// console.log(\"input calling onSubmit handler\")\n\t\t\t\tthis.props.onSubmit(this.state.completions)\n\t\t\t}else{\n\t\t\t\tinput.dispatchEvent(new Event(\"submit\")) //alternative method\n\t\t\t}\n\t\t\tthis.inputElem?.blur();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn;\n\t\t}\n\t\t// setTimeout(()=>console.log(event.key,this.state,this),100);\n\t}\n\n\tget currentSuggestion(){\n\t\tif(this.state.completions && this.state.completions.length){\n\t\t\treturn this.state.completions[Math.max(this.state.highlight,0)]\n\t\t}\n\t\treturn undefined\n\t}\n\t#applySuggestion(input:HTMLInputElement):void{\n\t\tif(this.state.highlight>-1){\n\t\t\tconst suggestion=this.currentSuggestion\n\t\t\tif(suggestion){\n\t\t\t\t//manually set the \n\t\t\t\tinput.value=suggestion.value\n\t\t\t\tthis.#inputHandler();\n\t\t\t}\n\t\t}\n\t}\n\n\n\trender(){\t\n\t\treturn (\n\t\t\t<div id={this.props.id} className=\"completionInput\">\n\t\t\t\t<input \n\t\t\t\t\tref={elem=>this.inputElem=elem}\n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tplaceholder=\"Search...\" \n\t\t\t\t\tonInput={this.inputHandler} \n\t\t\t\t\tonKeyDown={this.keyboardHandler}\n\t\t\t\t\tonBlur={()=>{this.forceUpdate()}}\n\t\t\t\t\tonFocus={()=>{this.inputElem && this.forceUpdate()}}\n\t\t\t\t\tautoFocus\n\t\t\t\t></input>\n\t\t\t\t{(this.state.completions \n\t\t\t\t\t&& (this.inputElem ? this.inputElem==document.activeElement : true)\n\t\t\t\t\t&& (this.state.completions.length>1 || this.value!=this.state.completions[0]?.value)\n\t\t\t\t)? \n\t\t\t\t\t<div className=\"completionList\">{\n\t\t\t\t\t\tthis.state.completions.map(\n\t\t\t\t\t\t\t(c,i)=>(\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tid={c.key||c.value} \n\t\t\t\t\t\t\t\t\tkey={c.key||c.value} \n\t\t\t\t\t\t\t\t\tclassName={`completion ${i==this.state.highlight?'active':''}`}\n\t\t\t\t\t\t\t\t>{c.html||c.value}</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t}</div>\n\t\t\t\t\t: ''\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount(): void {\n\t\tthis.inputElem?.focus();\n\t}\n\n}\n\n\nexport default CompletionInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}