{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/buck/Documents/software/formulate_graphql/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nvar _jsxFileName = \"/home/buck/Documents/software/formulate_graphql/src/input.component.tsx\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _inputHandler = /*#__PURE__*/_classPrivateFieldLooseKey(\"inputHandler\");\nexport default class Input extends React.Component {\n  // state:object;\n\n  constructor() {\n    super(arguments);\n    Object.defineProperty(this, _inputHandler, {\n      value: _inputHandler2\n    });\n    this.completions = [];\n    this.matches = [];\n    this.state = {\n      matchCount: -1\n    };\n    this.props.completions.then(list => {\n      this.props.completions = list;\n      console.log(list);\n    });\n    if (process.env.NODE_ENV == 'development') {\n      var _this$props;\n      console.debug(this);\n      if (typeof ((_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.onResults) != 'function') console.warn(\"No onResults() handler specified on <Input> in parent\");\n    }\n  }\n  findMatchingNames(search) {\n    return Object.values(this.completions).filter(obj => obj.name.startsWith(search));\n  }\n  get inputHandler() {\n    var _this$props2, _this$props3;\n    if (Number((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : _this$props2.debounce)) return Input.debounce(_classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler], (_this$props3 = this.props) === null || _this$props3 === void 0 ? void 0 : _this$props3.debounce, this);else return _classPrivateFieldLooseBase(this, _inputHandler)[_inputHandler].bind(this);\n  }\n  static debounce(fn, delay) {\n    let self = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n    var timer;\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timer);\n      timer = setTimeout(() => fn.apply(self, args), delay);\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"{this.props.id\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search...\",\n        onInput: this.inputHandler,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 4\n      }, this), this.state.matchCount > -1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Matches: \", this.state.matchCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 32\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 3\n    }, this);\n  }\n}\nfunction _inputHandler2(event) {\n  if (event.target.value) {\n    this.matches = Input.findMatchingNames(event.target.value);\n    console.log(event.target.value, '=', arr);\n    this.setState({\n      matchCount: this.matches.length\n    });\n    if (this.state.matchCount) {\n      var _this$props4;\n      if (typeof ((_this$props4 = this.props) === null || _this$props4 === void 0 ? void 0 : _this$props4.onResults) == 'function') {\n        this.props.onResults(this.matches);\n      } else {\n        promise.then(console.log, console.error);\n      }\n    }\n  }\n}","map":{"version":3,"names":["React","Input","Component","constructor","arguments","completions","matches","state","matchCount","props","then","list","console","log","process","env","NODE_ENV","debug","onResults","warn","findMatchingNames","search","Object","values","filter","obj","name","startsWith","inputHandler","Number","debounce","bind","fn","delay","self","window","timer","args","clearTimeout","setTimeout","apply","render","event","target","value","arr","setState","length","promise","error"],"sources":["/home/buck/Documents/software/formulate_graphql/src/input.component.tsx"],"sourcesContent":["import React from 'react'\n\nexport default class Input extends React.Component {\n\n\n\n\tcompletions:Array<{name:string}>=[]\n\n\t// state:object;\n\n\tconstructor(){\n\t\tsuper(arguments)\n\t\tthis.state={matchCount:-1}\n\t\tthis.props.completions.then(list=>{this.props.completions=list; console.log(list)})\n\t\tif(process.env.NODE_ENV=='development'){\n\t\t\tconsole.debug(this)\n\t\t\tif(typeof this.props?.onResults!='function')\n\t\t\t\tconsole.warn(\"No onResults() handler specified on <Input> in parent\");\n\t\t}\n\n\t}\n\n\tfindMatchingNames(search:string){\n\t\treturn Object.values(this.completions).filter(obj=>obj.name.startsWith(search))\n\t}\n\n\t\n\tget inputHandler(){\n\t\tif(Number(this.props?.debounce))\n\t\t\treturn Input.debounce(this.#inputHandler,this.props?.debounce,this);\n\t\telse\n\t\t\treturn this.#inputHandler.bind(this);\n\t}\n\n\tmatches=[];\n\t#inputHandler(event){\n\t\tif(event.target.value){\n\t\t\tthis.matches=Input.findMatchingNames(event.target.value);\n\t\t\tconsole.log(event.target.value,'=',arr);\n\t\t\tthis.setState({matchCount:this.matches.length})\n\t\t\tif(this.state.matchCount){\n\t\t\t\tif(typeof this.props?.onResults=='function'){\n\t\t\t\t\tthis.props.onResults(this.matches);\n\t\t\t\t}else{\n\t\t\t\t\tpromise.then(console.log,console.error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tstatic debounce(fn:Function,delay:number,self:any=window){\n\t\tvar timer:number;\n\t\treturn (...args:any)=>{\n\t\t\tclearTimeout(timer);\n\t\t\ttimer=setTimeout(()=>fn.apply(self,args),delay);\n\t\t}\n\t}\n   \n\trender(){return (\n\t\t<div id=\"{this.props.id\">\n\t\t\t<input type=\"text\" placeholder=\"Search...\" onInput={this.inputHandler} autoFocus></input>\n\t\t\t{this.state.matchCount>-1 ? <span>Matches: {this.state.matchCount}</span> : null }\n\t\t</div>\n\t);}\n\n\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}